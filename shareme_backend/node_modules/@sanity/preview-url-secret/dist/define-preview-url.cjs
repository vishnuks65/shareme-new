"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./_chunks/constants-njScg_lu.cjs");exports.definePreviewUrl=function(t){const{draftMode:n,origin:r=("undefined"==typeof location?"https://localhost":location.origin)}=t;let{preview:a="/"}=t;const o=new URL(a,r),i=n.enable?new URL(n.enable,r):void 0;return async n=>{try{if(n.previewSearchParam){const e=new URL(n.previewSearchParam,o);e.origin===o.origin&&(a="".concat(e.pathname).concat(e.search))}else if(n.referrer){const e=new URL(n.referrer);e.origin===o.origin&&(a="".concat(e.pathname).concat(e.search))}}catch{}"undefined"!=typeof location&&location.origin===o.origin&&n.studioBasePath&&(a.startsWith("".concat(n.studioBasePath,"/"))||a===n.studioBasePath)&&(a=t.preview||"/");const r=new URL(a,o);if(i){const t=new URL(i),{searchParams:a}=t;return a.set(e.u,n.previewUrlSecret),r.pathname!==t.pathname&&a.set(e.b,"".concat(r.pathname).concat(r.search)),t.toString()}return r.toString()}};//# sourceMappingURL=define-preview-url.cjs.map
