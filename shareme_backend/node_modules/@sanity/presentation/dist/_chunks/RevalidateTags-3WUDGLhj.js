import{useMemo as t,useEffect as e}from"react";import{useClient as n,getPublishedId as i}from"sanity";function r(r){const{channel:s}=r,o=n({apiVersion:"2023-10-16"}),a=t((()=>o.config()),[o]);return e((()=>{if(s){const{projectId:t,dataset:e}=a,n=o.listen('*[!(_type in path("system.**"))]',{},{events:["mutation"],includePreviousRevision:!1,includeResult:!0,visibility:"query",tag:"presentation-loader"}).subscribe((n=>{var r,o,a;if("mutation"!==n.type||"disappear"===n.transition)return;const l=null==(r=n.result)?void 0:r._type;if(!l)return void console.warn("Type is missing, skipping revalidation",n);const u=(null==(a=null==(o=n.result)?void 0:o.slug)?void 0:a.current)?"".concat(l,":").concat(n.result.slug.current):void 0,c=[i(n.documentId),l,u].filter(Boolean);s.send("loaders","loader/revalidate-tags",{projectId:t,dataset:e,tags:c})}));return()=>n.unsubscribe()}}),[s,o,a]),null}export{r as default};//# sourceMappingURL=RevalidateTags-3WUDGLhj.js.map
