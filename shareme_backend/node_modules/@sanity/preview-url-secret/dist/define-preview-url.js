import{u as e,b as t}from"./_chunks/constants-mg9CwKOs.js";function n(n){const{draftMode:a,origin:r=("undefined"==typeof location?"https://localhost":location.origin)}=n;let{preview:o="/"}=n;const i=new URL(o,r),c=a.enable?new URL(a.enable,r):void 0;return async a=>{try{if(a.previewSearchParam){const e=new URL(a.previewSearchParam,i);e.origin===i.origin&&(o="".concat(e.pathname).concat(e.search))}else if(a.referrer){const e=new URL(a.referrer);e.origin===i.origin&&(o="".concat(e.pathname).concat(e.search))}}catch{}"undefined"!=typeof location&&location.origin===i.origin&&a.studioBasePath&&(o.startsWith("".concat(a.studioBasePath,"/"))||o===a.studioBasePath)&&(o=n.preview||"/");const r=new URL(o,i);if(c){const n=new URL(c),{searchParams:o}=n;return o.set(e,a.previewUrlSecret),r.pathname!==n.pathname&&o.set(t,"".concat(r.pathname).concat(r.search)),n.toString()}return r.toString()}}export{n as definePreviewUrl};//# sourceMappingURL=define-preview-url.js.map
